#!/usr/bin/env python
# -*- encoding: utf-8 -*-
lst = """come	as
io	I
il suo	his
che	that
lui	he
era	was
per	for
su	on
sono	are
con	with
essi	they
essere	be
a	at
uno	one
avere	have
questo	this
da	from
da	by
caldo	hot
parola	word
ma	but
cosa	what
alcuni	some
è	is
esso	it
voi	you
o	or
aveva	had
il	the
di	of
a	to
e	and
un	a
in	in
noi	we
lattina	can
fuori	out
altro	other
erano	were
che	which
fare	do
loro	their
tempo	time
se	if
volontà	will
come	how
suddetto	said
un	an
ogni	each
dire	tell
fa	does
set (noun)	set
tre	three
desiderare	want
aria	air
bene	well
anche	also
giocare	play
piccolo	small
fine	end
mettere	put
casa	home
leggere	read
mano	hand
porto	port
grande	large
compitare	spell
aggiungere	add
anche	even
terra	land
qui	here
mosto	must
grande	big
alto	high
tale	such
seguire	follow
atto	act
perché	why
chiedere	ask
maschi	men
cambiamento	change
è andato	went
luce	light
tipo	kind
spento	off
bisogno	need
casa	house
immagine	picture
provare	try
noi	us
di nuovo	again
1 animale	animal
punto	point
madre	mother
mondo	world
vicino	near
costruire	build
se stesso	self
terra	earth
padre	father
qualsiasi	any
nuovo	new
lavoro	work
1 parte	part
prendere	take
ottenere	get
posto	place
fatto	made
vivere	live
dove	where
dopo	after
indietro	back
poco	little
solo	only
turno	round
uomo	man
anno	year
è venuto	came
spettacolo	show
ogni	every
buono	good
1 me	me
dare	give
il nostro	our
sotto	under
nome	name
molto	very
attraverso	through
solo	just
1 forma	form
frase	sentence
grande	great
pensare	think
dire	say
aiutare	help
basso	low
linea	line
differire	differ
1 turno	turn
1 causa	cause
molto	much
dire	mean
prima	before
spostare	move
diritto	right
ragazzo	boy
vecchio	old
troppo	too
stesso	same
lei	she
tutto	all
ci	there
quando	when
su	up
1 uso	use
il tuo	your
modo	way
circa	approximately
molti	many
allora	then
loro	them
scrivere	write
sarebbe	would
come	like
così	so
queste	these
lei	her
lungo	long
rendere	make
cosa	thing
vedere	see
lui	him
due	two
ha	has
guardare	look
di più	more
giorno	day
potuto	could
andare	go
venire	come
ha fatto	did
1 numero	number
suono	sound
1 no	no
più	most
1 persone	people
il mio	my
oltre	over (more than)
sapere	know
acqua	water
di	than
chiamata	call
primo	first
che	who
può	may
giù	down
lato	side
stato	been
ora	now
trovare	find
testa	head
1 stare in piedi	stand
proprio	own
1 pagina	page
dovrebbe	should
paese	country
fondare	found
risposta	answer
scuola	school
crescere	grow
1 studio	study
ancora	still
imparare	learn
impianto	plant
copertura	cover
cibo	food
sole	sun
quattro	four
fra	between
stato	state
mantenere	keep
occhio	eye
mai	never
ultimo	last
lasciare	let
pensiero	thought
1 città	city
albero	tree
attraversare	cross
fattoria	farm
1 difficile	hard
inizio	start
forza	might
1 storia	story
sega	saw
lontano	far
mare	sea
disegnare	draw
sinistra	left
tardi	late
1 non	don’t
mentre	while
stampa	press
notte	night
1 reale	real
vita	life
pochi	few
1 nord	north
libro	book
portare	carry
ha preso	took
1 scienza	science
mangiare	eat
camera	room
amico	friend
ha iniziato	began
1 idea	idea
pesce	fish
montagna	mountain
una volta	once
1 base	base
sentire	hear
cavallo	horse
taglio	cut
sicuro	sure
orologio	watch
colore	color
volto	face
legno	wood
principale	main
aperto	open
sembrare	seem
insieme	together
prossimo	next
bianco	white
bambini	children
inizio	begin
ottenuto	got
camminare	walk
esempio	example
alleviare	ease
carta	paper
1 gruppo	group
sempre	always
1 musica	music
quelli	those
entrambi	both
marchio	mark
spesso	often
1 lettera	letter
fino a quando	until
miglio	mile
fiume	river
1 auto	car
piedi	feet
cura	care
secondo	second
abbastanza	enough
pianura	plain
ragazza	girl
solito	usual
giovane	young
pronto	ready
sopra	above
mai	ever
rosso	red
elenco	list
anche se	though
sentire	feel
1 Discussioni	talk
uccello	bird
presto	soon
corpo	body
cane	dog
1 famiglia	family
diretto	direct
1 posa	pose
lasciare	leave
canzone	song
misurare	measure
porta	door
1 prodotto	product
nero	black
breve	short
1 numerale	numeral
1 classe	class
vento	wind
domanda	question
accadere	happen
integrale	complete
nave	ship
metà	half
ordine	order
fuoco	fire
sud	south
1 problema	problem
pezzo	piece
ha detto	told
sapeva	knew
passare	pass
da	since
tutto	whole
re	king
strada	street
pollice	inch
moltiplicare	multiply
niente	nothing
corso	course
soggiornare	stay
ruota	wheel
completo	full
vigore	force
blu	blue
oggetto	object
1 decidere	decide
superficie	surface
profondità	deep
luna	moon
isola	island
piede	foot
1 sistema	system
occupato	busy
barca	boat
comune	common
oro	gold
1 possibile	possible
piano	plane
vece	stead
asciutto	dry
meraviglia	wonder
ridere	laugh
migliaia	thousand
fa	ago
corse	ran
controllare	check
gioco	game
1 forma	shape
uguagliare	equate
caldo	hot
perdere	miss
portato	brought
calore	heat
neve	snow
pneumatico	tire
portare	bring
sì	yes
lontano	distant
riempire	fill
est	east
dipingere	paint
lingua	language
tra	among
unità	unit
potenza	power
città	town
certo	certain
volare	fly
cadere	fall
portare	lead
grido	cry
scuro	dark
1 macchina	machine
1 nota	note
aspettare	wait
piano	plan
1 figura	figure
stella	star
scatola	box
sostantivo	noun
campo	field
1 resto	rest
1 corretto	correct
in grado di	able
libbra	pound
bellezza	beauty
unità	drive
sorgeva	stood
contenere	contain
frontale	front
insegnare	teach
settimana	week
1 finale	final
ha dato	gave
verde	green
veloce	quick
sviluppare	develop
1 oceano	ocean
caldo	warm
gratuito	free
1 minuto	minute
forte	strong
1 speciale	special
mente	mind
dietro	behind
chiaro	clear
coda	tail
produrre	produce
fatto	fact
spazio	space
sentito	heard
migliore	best
ora	hour
meglio	better
vero	true
durante	during
cento	hundred
cinque	five
ricordare	remember
passo	step
presto	early
tenere	hold
ovest	west
terra	ground
1 interesse	interest
raggiungere	reach
veloce	fast
1 verbo	verb
cantare	sing
ascoltare	listen
sei	six
tavolo	table
viaggi	travel
meno	less
mattina	morning
dieci	ten
semplice	simple
alcuni	several
vocale	vowel
verso	toward
guerra	war
porre	lay
contro	against
modello	pattern
lento	slow
centro	center
amore	love
1 persona	person
soldi	money
servire	serve
apparire	appear
strada	road
1 mappa	map
pioggia	rain
regola	rule
governare	govern
tirare	pull
freddo	cold
avviso	notice
voce	voice
energia	energy
caccia	hunt
probabile	probable
letto	bed
fratello	brother
uovo	egg
giro	ride
cella	cell
credere	believe
forse	perhaps
scegliere	pick
improvviso	sudden
contare	count
piazza	square
motivo	reason
lunghezza	length
1 rappresentare	represent
1 arte	art
soggetto	subject
1 regione	region
dimensione	size
1 variare	vary
risolvere	settle
parlare	speak
peso	weight
1 generale	general
ghiaccio	ice
materia	matter
cerchio	circle
coppia	pair
includere	include
1 sillaba	syllable
1 grande	grand
palla	ball
ancora	yet
onda	wave
cadere	drop
cuore	heart
1 presente	present
pesante	heavy
1 danza	dance
1 motore	engine
1 posizione	position
braccio	arm
ampio	wide
vela	sail
1 materiale	material
frazione	fraction
1 foresta	forest
sedersi	sit
gara	race
finestra	window
negozio	store
estate	summer
treno	train
sonno	sleep
dimostrare	prove
solitario	lone
gamba	leg
1 esercizio	exercise
muro	wall
prendere	catch
1 monte	mount
desiderio	wish
cielo	sky
pensione	board
gioia	joy
inverno	winter
scritto	written
selvaggio	wild
1 strumento	instrument
tenere	kept
vetro	glass
erba	grass
mucca	cow
lavoro	job
bordo	edge
segno	sign
visita	visit
1 passato	past
morbido	soft
divertimento	fun
luminoso	bright
tempo	weather
mese	month
1 milione	million
sopportare	bear
finitura	finish
felice	happy
speranza	hope
fiore	flower
vestire	clothe
strano	strange
1 commercio	trade
1 melodia	melody
viaggio	trip
1 ufficio	office
1 ricevere	receive
fila	row
bocca	mouth
esatto	exact
1 simbolo	symbol
morire	die
meno	least
difficoltà	trouble
tranne	except
ha scritto	wrote
seme	seed
tono	tone
aderire	join
suggerire	suggest
pulito	clean
1 pausa	break
signora	lady
cantiere	yard
salire	rise
male	bad
colpo	blow
olio	oil
sangue	blood
toccare	touch
è cresciuto	grew
mescolare	mix
filo	wire
1 costo	cost
perso	lost
marrone	brown
indossare	wear
giardino	garden
pari	equal
inviato	sent
scegliere	choose
caduto	fell
adattarsi	fit
flusso	flow
fiera	fair
banca	bank
raccogliere	collect
salvare	save
controllo	control
decimale	decimal
orecchio	ear
altro	else
abbastanza	quite
rotto	broke
caso	case
mezzo	middle
uccidere	kill
figlio	son
lago	lake
1 momento	moment
1 scala	scale
forte	loud
primavera	spring
osservare	observe
bambino	child
dritto	straight
consonante	consonant
nazione	nation
dizionario	dictionary
latte	milk
1 velocità	speed
1 metodo	method
1 organo	organ
pagare	pay
età	age
sezione	section
vestito	dress
nube	cloud
1 sorpresa	surprise
tranquillo	quiet
pietra	stone
piccolo	tiny
salita	climb
fresco	cool
povero	poor
1 lotto	lot
1 esperimento	experiment
fondo	bottom
chiave	key
ferro	iron
1 singolo	single
bastone	stick
1 appartamento	flat
venti	twenty
pelle	skin
sorriso	smile
piega	crease
foro	hole
salto	jump
bambino	baby
otto	eight
villaggio	village
si incontrano	meet
radice	root
acquistare	buy
aumentare	raise
risolvere	solve
1 metallo	metal
se	whether
spingere	push
sette	seven
1 paragrafo	paragraph
terzo	third
deve	shall
tenuto	held
capelli	hair
descrivere	describe
cuoco	cook
piano	floor
o	either
1 risultato	result
bruciare	burn
collina	hill
1 sicuro	safe
gatto	cat
secolo	century
considerare	consider
tipo	type
legge	law
1 costa	coast
1 copia	copy
frase	phrase
silenzioso	silent
alto	tall
sabbia	sand
suolo	soil
rotolo	roll
1 temperatura	temperature
dito	finger
1 industria	industry
valore	value
lotta	fight
bugia	lie
battere	beat
eccitare	excite
1 naturale	natural
vista	view
1 senso	sense
1 capitale	capital
non sarà	won’t
sedia	chair
pericolo	danger
frutta	fruit
ricco	rich
spesso	thick
soldato	soldier
1 processo	process
1 operare	operate
1 pratica	practice
1 separato	separate
difficile	difficult
medico	doctor
per favore	please
proteggere	protect
mezzogiorno	noon
raccolto	crop
1 moderno	modern
1 elemento	element
colpire	hit
1 studente	student
angolo	corner
partito	party
fornitura	supply
la cui	whose
individuare	locate
anello	ring
carattere	character
insetto	insect
catturato	caught
1 periodo	period
1 indicare	indicate
raggio	spoke
1 atomo	atom
umano	human
1 storia	history
1 effetto	effect
1 elettrico	electric
aspettare	expect
osso	bone
ferrovia	rail
1 immaginare	imagine
fornire	provide
concordare	agree
così	thus
dolce	gentle
donna	woman
1 capitano	captain
indovinare	guess
1 necessario	necessary
tagliente	sharp
ala	wing
1 creare	create
prossimo	neighbor
lavaggio	wash
pipistrello	bat
piuttosto	rather
folla	crowd
mais	corn
confrontare	compare
poesia	poem
1 stringa	string
campana	bell
dipendere	depend
carne	meat
strofinare	rub
tubo	tube
1 famoso	famous
ruscello	stream
paura	fear
vista	sight
sottile	thin
1 triangolo	triangle
pianeta	planet
fretta	hurry
capo	chief
1 colonia	colony
orologio	clock
miniera	mine
cravatta	tie
inserire	enter
maggiore	major
fresco	fresh
ricerca	search
inviare	send
giallo	yellow
1 pistola	gun
consentire	allow
stampa	print
morto	dead
1 deserto	desert
tuta	suit
1 corrente	current
ascensore	lift
1 rosa	rose
1 arrivare	arrive
1 master	master
pista	track
genitore	parent
riva	shore
1 divisione	division
foglio	sheet
1 sostanza	substance
1 favorire	favor
collegare	connect
1 Messaggio	post
spendere	spend
accordo	chord
grasso	fat
felice	glad
1 originale	original
quota	share
1 stazione	station
1 papà	dad
pane	bread
carica	charge
corretto	proper
offerta	offer
1 segmento	segment
schiavo	slave
anatra	duck
1 immediato	instant
mercato	market
grado	degree
popolare	populate
pulcino	chick (poultry)
caro	dear
nemico	enemy
rispondere	reply
bevanda	drink
verificarsi	occur
1 supporto	support
1 discorso	speech
1 natura	nature
gamma	range
1 vapore	steam
moto	motion
sentiero	path
1 liquido	liquid
1 significava	meant
quoziente	quotient
1 denti	teeth
guscio	shell
collo	neck
ossigeno	oxygen
zucchero	sugar
morte	death
piuttosto	pretty
1 abilità	skill
donne	women
stagione	season
soluzione	solution
1 magnete	magnet
argento	silver
grazie	thank
ramo	branch
partita	match
suffisso	suffix
1 particolarmente	especially
fico	fig
impaurito	afraid
1 enorme	huge
sorella	sister
acciaio	steel
discutere	discuss
avanti	forward
1 simile	similar
1 guidare	guide
1 esperienza	experience
punteggio	score
mela	apple
comprato	bought
portato	led
pece	pitch
cappotto	coat
1 massa	mass
scheda	card
1 banda	band
1 corda	rope
slittamento	slip
1 vittoria	win
sognare	dream
sera	evening
1 condizione	condition
alimentazione	feed
strumento	tool
1 totale	total
di base	basic
odore	smell
1 valle	valley
né	nor
doppio	double
sedile	seat
1 continuare	continue
blocco	block
grafico	chart
cappello	hat
vendere	sell
1 successo	success
azienda	company
sottrarre	subtract
1 evento	event
1 particolare	particular
1 affare	deal
nuoto	swim
1 termine	term
opposto	opposite
moglie	wife
scarpa	shoe
spalla	shoulder
organizzare	arrange
1 campo	camp
1 inventare	invent
1 cotone	cotton
nascita	born
1 determinare	determine
quarto di gallone	quart
nove	nine
camion	truck
rumore	noise
1 livello	level
1 possibilità	chance
raccogliere	gather
negozio	shop
tratto	stretch
gettare	throw
1 proprietà	property
1 colonna	column
1 molecola	molecule
1 selezionare	select
sbagliato	wrong
grigio	gray
1 ripetizione	repeat
richiedere	require
ampio	broad
1 preparare	prepare
sale	salt
naso	nose
1 plurale	plural
rabbia	anger
richiesta	claim
1 continente	continent""".split('\n')

lst = [l.split('\t') for l in lst]
for l in lst:
    if len(l)<2:
        print(l)
x = 1
def decr():
    global x
    x -= 1/len(lst)
    return x
lst = [(a.strip(), b.strip(), decr()) for a,b in lst]

en_to_other = dict((a,b) for a,b,_ in lst)
en_nouns = list(k.lstrip('1 ') for k in en_to_other.keys())
other_nouns = en_to_other.values()

from collections import defaultdict
from random import choice, randint, random

class Question:
    seen = defaultdict(int)
    total = 0
    size = len(lst)

    def render(self):
        i,w,o1,o2,o3 = self.generate()
        return str(i), (
            ' {} -\n'
            ' a) {}\n'
            ' b) {}\n'
            ' c) {}'
        ).format(w,o1,o2,o3)

    def generate(self):
        for _ in range(100):
            tr, w, x = choice(lst)
            if tr.startswith('1') and random()>0.05:
                continue
            # if random()>x**2:
            #     continue
            if self.seen[w]==0 or self.total >= self.size:
                break
        o2,o3 = choice(en_nouns), choice(en_nouns)
        i = randint(1,3)
        self.total += 1
        self.seen[w] += 1
        if tr.startswith('1'):
            tr = tr.split()[1]
        if i==1:
            return ('a',w,tr,o2,o3)
        elif i==2:
            return ('b',w,o2,tr,o3)
        else:
            return ('c',w,o2,o3,tr)

if __name__ == "__main__":
    print(Question().render()[1])
    for _ in range(1):
        tup = Question().generate()
        print(tup)
        w = tup[1]
        print(list(gr_nouns).index(w))

